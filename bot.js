require("dotenv").config();
const TelegramBot = require("node-telegram-bot-api");
const config = require("./bot-config");

// Ð˜Ð½Ð¸Ñ†Ð¸Ð°Ð»Ð¸Ð·Ð°Ñ†Ð¸Ñ Ð±Ð¾Ñ‚Ð°
const bot = new TelegramBot(process.env.TELEGRAM_BOT_TOKEN, {
	polling: true,
});

// ÐšÐ¾Ð¼Ð°Ð½Ð´Ñ‹ Ð±Ð¾Ñ‚Ð°
bot.setMyCommands(config.commands);

const startOptions = {
	reply_markup: {
		inline_keyboard: [
			[
				{
					text: "Button 1",
					callback_data: "callback_query",
				},
				{
					text: "Button 2",
					callback_data: "callback_query",
				},
			],

			[
				{
					text: "Button 3",
					callback_data: "callback_query",
				},
				{
					text: "Button 4",
					callback_data: "callback_query",
				},
			],
		],
	},
};

// Texts
const FAQ_text = `
*â“ Ð§Ð°ÑÑ‚Ñ‹Ðµ Ð²Ð¾Ð¿Ñ€Ð¾ÑÑ‹*

*ÐšÐ°Ðº Ð·Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ðº Ð´ÐµÑ‚ÑÐºÐ¾Ð¼Ñƒ ÑÑ‚Ð¾Ð¼Ð°Ñ‚Ð¾Ð»Ð¾Ð³Ñƒ?*
â”” Ð—Ð°Ð¿Ð¸ÑÑŒ Ðº Ð´ÐµÑ‚ÑÐºÐ¾Ð¼Ñƒ ÑÑ‚Ð¾Ð¼Ð°Ñ‚Ð¾Ð»Ð¾Ð³Ñƒ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ Ð¿Ð¾ Ð¿Ð¾Ð½ÐµÐ´ÐµÐ»ÑŒÐ½Ð¸ÐºÐ°Ð¼ ÐºÐ°Ð¶Ð´ÑƒÑŽ Ð½ÐµÐ´ÐµÐ»ÑŽ, Ð·Ð°Ð¿Ð¸ÑÑŒ Ñ‡ÐµÑ€ÐµÐ· call-Ñ†ÐµÐ½Ñ‚Ñ€: 83012379938

*ÐšÐ°Ðº Ð·Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ðº Ð²Ñ€Ð°Ñ‡Ñƒ Ð¾Ñ„Ñ‚Ð°Ð»ÑŒÐ¼Ð¾Ð»Ð¾Ð³Ñƒ?*
â”” Ð—Ð°Ð¿Ð¸ÑÑŒ Ðº Ð²Ñ€Ð°Ñ‡Ñƒ Ð¾Ñ„Ñ‚Ð°Ð»ÑŒÐ¼Ð¾Ð»Ð¾Ð³Ñƒ Ð¾Ñ‚ÐºÑ€Ñ‹Ð²Ð°ÐµÑ‚ÑÑ ÐºÐ°Ð¶Ð´ÑƒÑŽ Ð¿ÑÑ‚Ð½Ð¸Ñ†Ñƒ, Ð·Ð°Ð¿Ð¸ÑÐ°Ñ‚ÑŒÑÑ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾ Ñ‚ÐµÐ»ÐµÑ„Ð¾Ð½Ñƒ 83012379938

*ÐÑƒÐ¶Ð½Ð¾ Ð»Ð¸ Ð±ÐµÑ€ÐµÐ¼ÐµÐ½Ð½Ñ‹Ð¼ Ð·Ð°Ð¿Ð¸ÑÑ‹Ð²Ð°Ñ‚ÑŒÑÑ Ðº Ñ‚ÐµÑ€Ð°Ð¿ÐµÐ²Ñ‚Ñƒ Ð´Ð»Ñ Ð¿Ð¾Ð´Ð¿Ð¸ÑÐ°Ð½Ð¸Ñ Ð¾ÑÐ¼Ð¾Ñ‚Ñ€Ð°?*
â”” Ð”Ð°, Ð½ÑƒÐ¶Ð½Ð¾

*Ð“Ð´Ðµ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ð¾ÑÑ‚Ð°Ð²Ð¸Ñ‚ÑŒ Ð¿ÐµÑ‡Ð°Ñ‚ÑŒ Ð¾ Ð¿Ñ€Ð¾Ñ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ð¸ Ð¤Ð›Ð“?*
â”” Ð ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ñ‹ Ð¤Ð›Ð“ Ð³Ð¾Ñ‚Ð¾Ð²Ñ‹ Ð½Ð° ÑÐ»ÐµÐ´ÑƒÑŽÑ‰Ð¸Ð¹ Ð´ÐµÐ½ÑŒ, Ð¿Ð¾ÑÐ»Ðµ Ð¿Ñ€Ð¾Ñ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð¤Ð›Ð“

*Ð¡ÐºÐ¾Ð»ÑŒÐºÐ¾ ÑÑ‚Ð¾Ð¸Ñ‚ Ð²Ð¾Ð´Ð¸Ñ‚ÐµÐ»ÑŒÑÐºÐ°Ñ ÑÐ¿Ñ€Ð°Ð²ÐºÐ°?*
â”” ÐšÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð’-915 Ñ€ÑƒÐ±Ð»ÐµÐ¹, ÐºÐ°Ñ‚ÐµÐ³Ð¾Ñ€Ð¸Ñ Ð¡-1130 Ñ€ÑƒÐ±Ð»ÐµÐ¹

*Ð”Ð»Ñ Ð¿Ñ€Ð¾Ñ…Ð¾Ð¶Ð´ÐµÐ½Ð¸Ñ Ð¼Ð°Ð¼Ð¼Ð¾Ð³Ñ€Ð°Ñ„Ð¸Ñ Ð½ÑƒÐ¶Ð½Ð¾ Ð½Ð°Ð¿Ñ€Ð°Ð²Ð»ÐµÐ½Ð¸Ðµ?*
â”” Ð”Ð°

*ÐšÐ°Ðº Ð¿Ð¾Ð·Ð²Ð¾Ð½Ð¸Ñ‚ÑŒ Ð² Ñ‚ÐµÑ€Ð°Ð¿ÐµÐ²Ñ‚Ð¸Ñ‡ÐµÑÐºÐ¾Ðµ Ð¾Ñ‚Ð´ÐµÐ»ÐµÐ½Ð¸Ðµ?*
â”” 83012379963, Ð´Ð¾Ð± 106

*ÐšÐ°Ðº ÑƒÐ·Ð½Ð°Ñ‚ÑŒ Ð¾ Ð¿Ð¾ÑÑ‚ÑƒÐ¿Ð»ÐµÐ½Ð¸Ð¸ Ð»ÑŒÐ³Ð¾Ñ‚Ð½Ð¾Ð³Ð¾ Ð»ÐµÐºÐ°Ñ€ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð³Ð¾ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ð°?*
â”” ÐŸÑ€Ð¾Ð¹Ð´Ð¸Ñ‚Ðµ Ð¿Ð¾ ÑÑÑ‹Ð»ÐºÐµ https://t.me/petrcrb  Ð² Ñ‚ÐµÐ»ÐµÐ³Ñ€Ð°Ð¼Ð¼ ÐºÐ°Ð½Ð°Ð» Ð—Ð´Ð¾Ñ€Ð¾Ð²ÑŒÐµ Ð”Ð¶Ð¸Ð´Ñ‹ Ð² Ñ‚ÐµÐ¼Ðµ "ÐÐ¿Ñ‚ÐµÐºÐ° Ð“Ð‘Ð£Ð— ÐŸÐµÑ‚Ñ€Ð¾Ð¿Ð°Ð²Ð»Ð¾Ð²ÑÐºÐ°Ñ Ð¦Ð Ð‘" Ð¼Ð¾Ð¶ÐµÑ‚Ðµ Ð·Ð°Ð´Ð°Ñ‚ÑŒ Ð²Ð¾Ð¿Ñ€Ð¾Ñ Ð¾Ð± Ð¸Ð½Ñ‚ÐµÑ€ÐµÑÑƒÑŽÑ‰Ð¸Ð¼ÑÑ Ð»ÐµÐºÐ°Ñ€ÑÑ‚Ð²ÐµÐ½Ð½Ð¾Ð¼ Ð¿Ñ€ÐµÐ¿Ð°Ñ€Ð°Ñ‚Ðµ

*Ð’ ÐºÐ°ÐºÐ¾Ð¹ Ð´ÐµÐ½ÑŒ Ð½ÐµÐ´ÐµÐ»Ð¸ Ð¼Ð¾Ð¶Ð½Ð¾ Ð¿Ñ€Ð¾Ð¹Ñ‚Ð¸ Ð´Ð¸ÑÐ¿Ð°Ð½ÑÐµÑ€Ð¸Ð·Ð°Ñ†Ð¸ÑŽ Ð¾Ð¿Ñ€ÐµÐ´ÐµÐ»ÐµÐ½Ð½Ñ‹Ñ… Ð³Ñ€ÑƒÐ¿Ð¿  Ð²Ð·Ñ€Ð¾ÑÐ»Ð¾Ð³Ð¾ Ð½Ð°ÑÐµÐ»ÐµÐ½Ð¸Ñ?*
â”” Ð’ Ð»ÑŽÐ±Ð¾Ð¹ Ð´ÐµÐ½ÑŒ, Ð² ÐºÐ°Ð±Ð¸Ð½ÐµÑ‚Ðµ Ð¿Ñ€Ð¾Ñ„Ð¸Ð»Ð°ÐºÑ‚Ð¸ÐºÐ¸
`;

const schedule_text = `
*ðŸ•’ Ð˜Ð½Ñ„Ð¾Ñ€Ð¼Ð°Ñ†Ð¸Ñ Ð¾ Ñ€ÐµÐ¶Ð¸Ð¼Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ñ‹*

*ÐÐ´Ð¼Ð¸Ð½Ð¸ÑÑ‚Ñ€Ð°Ñ†Ð¸Ñ:* ÐŸÐ½-ÐŸÑ‚: 08-00 - 17:00

*Ð¡Ñ‚Ð°Ñ†Ð¸Ð¾Ð½Ð°Ñ€:* ÐºÑ€ÑƒÐ³Ð»Ð¾ÑÑƒÑ‚Ð¾Ñ‡Ð½Ð¾

*ÐŸÐ¾Ð»Ð¸ÐºÐ»Ð¸Ð½Ð¸ÐºÐ°:* ÐŸÐ½-ÐŸÑ‚: 08-00 - 16:12

*Ð ÐµÐ½Ñ‚Ð³ÐµÐ½ ÐºÐ°Ð±Ð¸Ð½ÐµÑ‚:* 08:00-15:00

*ÐšÐ°ÑÑÐ° Ð¿Ð»Ð°Ñ‚Ð½Ñ‹Ñ… ÑƒÑÐ»ÑƒÐ³:* 
ÐŸÐ½: 08:00-12:00 
Ð¡Ñ€: 08:00-12:00, 13:00-16:00 
ÐŸÑ‚: 08-00 - 12:00 
Ð’Ñ‚, Ð§Ñ‚: ÐºÐ°ÑÐ° Ð½Ðµ Ñ€Ð°Ð±Ð¾Ñ‚Ð°ÐµÑ‚

*ÐŸÑ€Ð¸Ñ‘Ð¼ Ð»Ð°Ð±Ð¾Ñ€Ð°Ñ‚Ð¾Ñ€Ð½Ñ‹Ñ… Ð°Ð½Ð°Ð»Ð¸Ð·Ð¾Ð²:* 
ÐŸÐ½-ÐŸÑ‚: 08-00 - 10:00, Ð²Ñ‹Ð´Ð°Ñ‡Ð° Ñ€ÐµÐ·ÑƒÐ»ÑŒÑ‚Ð°Ñ‚Ð¾Ð² Ñ 15:00

*Ð ÐµÐ³Ð¸ÑÑ‚Ñ€Ð°Ñ‚ÑƒÑ€Ð° Ð¿Ð¾Ð»Ð¸ÐºÐ»Ð¸Ð½Ð¸ÐºÐ¸:* 
ÐŸÐ½-ÐŸÑ‚: 08-00 - 16:12, Ð¢ÐµÐ»: 8-301-237-11-26



*Ð“Ð¾Ñ€ÑÑ‡Ð°Ñ Ð»Ð¸Ð½Ð¸Ñ Ð¿Ð¾ Ð¾Ð±Ñ€Ð°Ñ‰ÐµÐ½Ð¸ÑŽ Ð³Ñ€Ð°Ð¶Ð´Ð°Ð½:* 
Ð¢ÐµÐ»: 8-301-243-50-38

*ÐŸÑ€Ð¸Ñ‘Ð¼Ð½Ð°Ñ Ð³Ð»Ð°Ð²Ð½Ð¾Ð³Ð¾ Ð²Ñ€Ð°Ñ‡Ð°:* 
Ð¢ÐµÐ»: 8(3012)37-99-63
`

// Ð¡Ð¾Ð¾Ð±Ñ‰ÐµÐ½Ð¸Ñ
bot.on("message", async (msg) => {
	const nameOfUser = msg.chat.first_name;
	const chatId = msg.chat.id;
	const messageText = msg?.text;

	console.log(msg);

	if (messageText.toLowerCase() == "/start") {
		return await bot
			.sendMessage(
				chatId,
				`ÐŸÑ€Ð¸Ð²ÐµÑ‚ÑÑ‚Ð²ÑƒÑŽ, ${nameOfUser} \n \nÐ­Ñ‚Ð¾ Ð±Ð¾Ñ‚ Ð¦Ð Ð‘`,
				startOptions
			)
			.then((sentMessage) => {
				bot.once("callback_query", (query) => {
					bot.deleteMessage(chatId, sentMessage.message_id);
				});
			});
	} 
	else if (messageText.toLowerCase() == "/faq") {
		return await bot.sendMessage(chatId, FAQ_text, {
			parse_mode: "Markdown",
			disable_web_page_preview: true,
		});
	} 
	else if (messageText.toLowerCase() == "/schedule") {
		return await bot.sendMessage(chatId, schedule_text, {
			parse_mode: "Markdown",
			disable_web_page_preview: true,
		});
	} 
	else {
		return await bot.sendMessage(chatId, "ÐÐµÐ¸Ð·Ð²ÐµÑÑ‚Ð½Ð°Ñ ÐºÐ¾Ð¼Ð°Ð½Ð´Ð°");
	}
});

// Callback query
bot.on("callback_query", async (msg) => {
	const chatId = msg.message.chat.id;
	const data = msg.data;
	console.log("Message : ", msg);

	return await bot.sendMessage(chatId, `Data : ${data}`);
});

console.log("The bot started successfully");
